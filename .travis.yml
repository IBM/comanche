language: c++

# add branches you want to triger CI
branches:
  only:
    - master
    - unstable
    - travis-CI-test

sudo: required

services:
  - docker

compiler:
  - g++

# TODO: we can auto-build and publish this docker image
# see https://docs.docker.com/docker-cloud/builds/automated-build
env:
  - DOCKERIMG="fengggli/comanche-env:ubuntu1604-180525.a"

# dock image see here: - docker run -d --name ubuntu-test -v $(pwd):/travis ubuntu:latest tail -f /dev/null
before_install:
  - docker run -d --name ubuntu-test -v $(pwd):/travis ${DOCKERIMG} tail -f /dev/null
  - docker ps

install:
  - docker exec -t ubuntu-test bash -c "apt-get update;
    cd /travis;
    cd deps;
    ./install-apts.sh;
    ./fetch-deps.sh;
    cd .. ;
    mkdir build;
    cd build;
    cmake .. ;
    make; 
    make install"





